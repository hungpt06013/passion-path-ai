<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Con ƒë∆∞·ªùng ƒëam m√™</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;300;400;500;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
    :root {
        --primary:#007bff;
        --primary-dark: #1e6fe6;
        --muted: #6b7280;
        --bg: #f5f8fb;
    }

    html, 
    body {
        height: 100%;
        overflow-x: hidden;
        overflow-y: auto;
    }

    body {
        margin: 0;
        padding: 0;
        background: var(--bg);
        font-family: 'Inter', sans-serif;
        color: #0f172a;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    .fixed-bar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 80px;
        background: var(--primary);
        box-shadow: 0 6px 20px rgba(14, 30, 37, 0.12);
        z-index: 50;
    }

    .bar-inner {
        max-width: 1200px;
        height: 100%;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 20px;
        box-sizing: border-box;
    }

    .brand {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .brand-icon {
        width: 48px;
        height: 48px;
        background: rgba(255,255,255,0.2);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 22px;
        flex-shrink: 0;
    }

    .brand-text {
        display: flex;
        flex-direction: column;
    }

    .brand-title {
        color: white;
        font-size: 20px;
        font-weight: 700;
    }

    .brand-sub {
        color: rgba(255,255,255,0.9);
        font-size: 12px;
        font-weight: 600;
    }

    .nav-buttons {
        display: flex;
        gap: 22px;
        align-items: center;
    }

    .nav-btn {
        background: none;
        color: #fff;
        padding: 0;
        font-size: 15px;
        font-weight: 600;
        border-radius: 9999px;
    }

    .nav-btn .fa {
        margin-right: 8px;
        opacity: 0.95;
    }

    .nav-btn.active {
        color: #e6f2ff;
        text-decoration: underline;
    }

    button {
        font-family: 'Inter', sans-serif;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        border: none;
        border-radius: 9999px;
        padding: 10px 20px;
        font-size: 15px;
        font-weight: 600;
    }

    .userInfo {
        color: white;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .login-btn {
        background: white;
        color: #333;
        box-shadow: 0 2px 5px rgba(0,0,0,0.12);
    }

    .login-btn:hover {
        background: #f0f0f0;
    }

    .register-btn {
        background: #28a745;
        color: white;
        box-shadow: 0 2px 5px rgba(0,0,0,0.12);
    }

    .register-btn:hover {
        background: #218838;
    }

    .logout-btn {
        background: linear-gradient(135deg, #4b0ee5 0%, #0682d4 100%);
        color: white;
        box-shadow: 0 2px 5px rgba(0,0,0,0.12);
    }

    .toApp-btn {
        background: #000;
        color: white;
        box-shadow: 0 2px 5px rgba(0,0,0,0.12);
    }

    .admin-btn {
        background: #6f42c1;
        color: white;
        box-shadow: 0 2px 5px rgba(0,0,0,0.12);
    }

    main {
        margin-top: 135px;
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
        padding: 30px 20px;
        box-sizing: border-box;
        position: relative;
    }

    .hero {
        display: grid;
        grid-template-columns: 1fr 560px;
        gap: 28px;
        align-items: start;
    }

    .hero-left {
        padding: 24px 12px;
    }

    .headline {
        font-size: 56px;
        line-height: 0.95;
        font-weight: 700;
        margin: 0;
        color: rgba(15,23,42,0.92);
    }

    .headline .accent {
        color: rgba(43,140,255,0.86);
        display: block;
        font-weight: 700;
    }

    .subdesc {
        margin-top: 18px;
        font-size: 18px;
        color: var(--muted);
        max-width: 640px;
    }

    .cta-row {
        margin-top: 28px;
        display: flex;
        gap: 12px;
        align-items: center;
    }

    .cta-center {
        display: flex;
        justify-content: center;
        width: 100%;
    }

    .cta-main {
        background: linear-gradient(180deg, var(--primary), var(--primary-dark));
        color: white;
        padding: 14px 28px;
        font-size: 18px;
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(43,140,255,0.18);
        display: inline-flex;
        align-items: center;
        gap: 10px;
    }

    .progress-card {
        background: white;
        border-radius: 14px;
        padding: 20px;
        box-shadow: 0 20px 40px rgba(13, 38, 71, 0.08);
        min-height: 370px;
    }

    .card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
    }

    .card-title {
        font-weight: 800;
        color: #0f172a;
        font-size: 20px;
    }
    .card-sub {
        color: var(--muted);
        font-size: 13px;
    }

    .progress-bar-wrap {
        margin-top: 14px;
        background: #eef2ff;
        height: 10px;
        border-radius: 999px;
        overflow: hidden;
    }

    .progress-fill {
        height: 100%;
        width: 42%;
        background: linear-gradient(90deg, var(--primary), var(--primary-dark));
    }

    .course-list {
        margin-top: 16px;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .course {
        border-radius: 10px;
        padding: 12px;
        background: #f8fbff;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        font-size: 14px;
    }

    .course.done {
        background: #e9f9ef;
    }

    .card-footer {
        margin-top: 18px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
    }

    .badges {
        display: flex;
        gap: 8px;
        align-items: center;
    }

    .badge {
        width: 28px;
        height: 28px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 10px rgba(12,40,80,0.06);
    }

    .points {
        font-weight: 700;
        color: #0f172a;
        font-size: 18px;
    }

    .features {
        margin-top: 28px;
        display: flex;
        gap: 22px;
        align-items: center;
        justify-content: center;
        width: 100%;
        box-sizing: border-box;
        padding-top: 8px;
    }

    .feature {
        display: flex;
        align-items: center;
        gap: 12px;
        background: white;
        padding: 12px 16px;
        border-radius: 12px;
        box-shadow: 0 8px 20px rgba(12,38,71,0.04);
        min-width: 180px;
        transition: transform 0.18s ease, box-shadow 0.18s ease;
    }

    .feature:hover {
        transform: translateY(-6px);
        box-shadow: 0 18px 40px rgba(12,38,71,0.08);
    }

    /* default icon style (kept for other features) */
    .feature i {
        background: linear-gradient(180deg, var(--primary), var(--primary-dark));
        color: white;
        padding: 8px;
        border-radius: 10px;
        width: 44px;
        height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        box-shadow: 0 8px 20px rgba(43,140,255,0.12);
    }

    /* custom styles for the two target features */
    .feature.ai i {
        /* purple -> teal gradient to be distinct from primary blue */
        background: linear-gradient(135deg, #7c3aed 0%, #06b6d4 100%);
        box-shadow: 0 10px 26px rgba(124,58,237,0.16);
        transform: translateZ(0);
    }

    .feature.progress i {
        /* warm orange -> yellow gradient for progress/gamification */
        background: linear-gradient(135deg, #11a811 0%, #15c051 100%);
        box-shadow: 0 10px 26px rgba(249,115,22,0.14);
        transform: translateZ(0);
    }

    .feature .f-text {
        display: flex;
        flex-direction: column;
    }

    .feature .f-title {
        font-weight: 700;
        font-size: 14px;
    }

    .feature .f-sub {
        font-size: 13px;
        color: var(--muted);
    }

    /* Ph·∫ßn Lƒ©nh V·ª±c Ph·ªï Bi·∫øn */
    .categories-section {
        /* k√©o l√™n m·ªôt ch√∫t so v·ªõi tr∆∞·ªõc, v·∫´n gi·ªØ kho·∫£ng tr·ªëng tho√°ng */
        margin-top: 8px;
        padding: 30px 20px;
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
    }

    .section-header {
        text-align: center;
        margin-bottom: 30px;
    }

    .section-title {
        font-size: 42px;
        font-weight: 800;
        color: #0f172a;
        margin: 0 0 12px 0;
    }

    .section-subtitle {
        font-size: 18px;
        color: var(--muted);
    }

    .categories-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
        gap: 24px;
    }

    .category-card {
        background: white;
        border-radius: 16px;
        padding: 28px;
        box-shadow: 0 4px 20px rgba(13, 38, 71, 0.08);
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }

    .category-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 40px rgba(13, 38, 71, 0.12);
    }

    .category-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--primary), var(--primary-dark));
    }

    .category-icon {
        width: 64px;
        height: 64px;
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        margin-bottom: 18px;
        color: white;
    }

    .category-name {
        font-size: 22px;
        font-weight: 700;
        color: #0f172a;
        margin: 0 0 8px 0;
    }

    .category-desc {
        font-size: 14px;
        color: var(--muted);
        margin: 0 0 16px 0;
        line-height: 1.6;
    }

    .category-stats {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 16px;
        border-top: 1px solid #e5e7eb;
    }

    .category-count {
        font-size: 16px;
        font-weight: 600;
        color: var(--primary);
    }

    .category-btn {
        background: transparent;
        color: var(--primary);
        padding: 8px 16px;
        font-size: 14px;
        font-weight: 600;
        border: 2px solid var(--primary);
        border-radius: 8px;
        transition: all 0.3s ease;
    }

    .category-btn:hover {
        background: var(--primary);
        color: white;
    }

    /* Footer (r√∫t g·ªçn chi·ªÅu cao) */
    footer {
        background: #1a202c;
        color: #e5e7eb;
        padding: 28px 20px 16px;
        margin-top: 40px;
    }

    .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: 2fr 1fr 1fr;
        gap: 24px;
        margin-bottom: 20px;
    }

    .footer-brand {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .footer-logo {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .footer-logo-icon {
        width: 44px;
        height: 44px;
        background: var(--primary);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 20px;
    }

    .footer-logo-text {
        display: flex;
        flex-direction: column;
    }

    .footer-logo-title {
        font-size: 18px;
        font-weight: 700;
        color: white;
    }

    .footer-logo-sub {
        font-size: 11px;
        color: #9ca3af;
    }

    .footer-desc {
        color: #9ca3af;
        line-height: 1.5;
        font-size: 13px;
    }

    .footer-social {
        display: flex;
        gap: 12px;
        margin-top: 8px;
    }

    .social-icon {
        width: 36px;
        height: 36px;
        background: #374151;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        transition: all 0.3s ease;
        text-decoration: none;
    }

    .social-icon:hover {
        background: var(--primary);
        transform: translateY(-2px);
    }

    .footer-section h3 {
        font-size: 15px;
        font-weight: 700;
        color: white;
        margin: 0 0 12px 0;
    }

    .footer-links {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .footer-link {
        color: #9ca3af;
        text-decoration: none;
        font-size: 13px;
        transition: color 0.3s ease;
    }

    .footer-link:hover {
        color: var(--primary);
    }

    .footer-bottom {
        max-width: 1200px;
        margin: 0 auto;
        padding-top: 16px;
        border-top: 1px solid #374151;
        text-align: center;
        color: #9ca3af;
        font-size: 13px;
    }
/* Modal styles */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    backdrop-filter: blur(5px);
    padding: 20px;
    overflow-y: auto;
}

.modal-overlay.active {
    display: flex;
}

.modal-content {
    background: white;
    width: 95%;
    max-width: 900px;
    max-height: 90vh;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 25px 50px rgba(0,0,0,0.3);
    display: flex;
    flex-direction: column;
    animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-50px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.modal-header {
    background: linear-gradient(135deg, #007bff, #007bff);
    color: white;
    padding: 25px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-header h2 {
    margin: 0 0 5px 0;
    font-size: 24px;
}

.modal-header p {
    margin: 0;
    opacity: 0.9;
    font-size: 14px;
}

.close-modal {
    background: none;
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    padding: 5px 10px;
    transition: transform 0.2s;
}

.close-modal:hover {
    transform: scale(1.1);
}

.modal-body {
    flex: 1;
    overflow-y: auto;
    padding: 30px;
}

.info-box {
    background: #fff3cd;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #ffc107;
}

.rating-group {
    margin-bottom: 25px;
    background: white;
    padding: 20px;
    border-radius: 12px;
    border: 2px solid #e5e7eb;
}

.rating-group label {
    display: block;
    font-weight: 600;
    color: #374151;
    margin-bottom: 12px;
    font-size: 14px;
}

.rating-stars {
    display: flex;
    gap: 8px;
    font-size: 32px;
}

.star {
    cursor: pointer;
    color: #d1d5db;
    transition: all 0.2s ease;
}

.star:hover,
.star.active {
    color: #fbbf24;
    transform: scale(1.2);
}

.rating-value {
    margin-top: 10px;
    font-size: 14px;
    color: #6b7280;
    font-weight: 600;
}

.textarea-group {
    margin-bottom: 20px;
    background: white;
    padding: 20px;
    border-radius: 12px;
    border: 2px solid #e5e7eb;
}

.textarea-group label {
    display: block;
    font-weight: 600;
    color: #374151;
    margin-bottom: 10px;
    font-size: 14px;
}

.textarea-group textarea {
    width: 100%;
    padding: 12px;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    font-family: inherit;
    font-size: 14px;
    resize: vertical;
    min-height: 80px;
    transition: all 0.3s ease;
}

.textarea-group textarea:focus {
    outline: none;
    border-color: #007bff;
    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
}

.submit-evaluation-btn {
    width: 100%;
    padding: 16px 32px;
    background: linear-gradient(135deg, #f59e0b, #d97706);
    color: white;
    border: none;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
}

.submit-evaluation-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(245, 158, 11, 0.3);
}

.submit-evaluation-btn:disabled {
    background: #9ca3af;
    cursor: not-allowed;
    transform: none;
}

@media (max-width: 768px) {
    .modal-content {
        width: 98%;
        max-height: 95vh;
    }
    
    .modal-body {
        padding: 20px;
    }
    
    .rating-stars {
        font-size: 28px;
    }
}
    @media (max-width:1100px) {
        .hero {
            grid-template-columns: 1fr 360px;
        }
        .headline {
            font-size: 48px;
        }
        .categories-grid {
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        }
    }

    @media (max-width:820px) {
        .bar-inner {
            flex-direction: column;
            height: auto;
            padding: 15px;
            gap: 10px;
        }

        .fixed-bar {
            height: auto;
        }

        .userInfo {
            flex-wrap: wrap;
            justify-content: center;
        }

        main {
            margin-top: 200px;
        }

        .hero {
            grid-template-columns: 1fr;
        }
        
        .progress-card {
            order: -1;
            margin-bottom: 16px;
        }
        
        .headline {
            font-size: 40px;
        }
        
        .card-footer {
            flex-direction: column;
            align-items: flex-start;
            gap: 8px;
        }
        
        .features {
            justify-content: flex-start;
            padding-left: 12px;
            flex-wrap: wrap;
        }

        .footer-content {
            grid-template-columns: 1fr;
            gap: 24px;
        }
    }

    @media (max-width:520px) {
        .brand-title {
            font-size: 16px;
        }

        .brand-sub {
            font-size: 11px;
        }

        button {
            font-size: 13px;
            padding: 8px 14px;
        }

        main {
            padding: 20px 15px;
        }

        .headline {
            font-size: 32px;
        }
        
        .subdesc {
            font-size: 15px;
        }
        
        .progress-card {
            padding: 16px;
        }
        
        .feature {
            min-width: 140px;
            padding: 10px 12px;
        }

        .feature i {
            width: 38px;
            height: 38px;
            font-size: 16px;
        }

        .cta-main {
            font-size: 16px;
            padding: 12px 24px;
        }

        .section-title {
            font-size: 32px;
        }

        .categories-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
</head>
<body>
    <div class="fixed-bar">
        <div class="bar-inner">
            <div class="brand">
                <div class="brand-icon">
                    <i class="fa-solid fa-graduation-cap"></i>
                </div>
                <div class="brand-text">
                    <div class="brand-title">Con ƒë∆∞·ªùng ƒëam m√™</div>
                    <div class="brand-sub">AI-Powered Learning Path</div>
                </div>
            </div>
            <div class="nav-buttons" id="mainNavButtons">
            <!-- Buttons s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
            </div>
            <div id="userArea" class="userInfo">
                <button class="login-btn"><i class="fa-solid fa-right-to-bracket"></i> ƒêƒÉng nh·∫≠p</button>
                <button class="register-btn"><i class="fa-solid fa-user-plus"></i> ƒêƒÉng k√Ω</button>
            </div>
        </div>
    </div>

    <main>
        <div class="hero">
            <div class="hero-left">
                <h1 class="headline">Tr∆∞·ªüng th√†nh t·ª´ <span class="accent">Nh·ªØng S·ªü Th√≠ch</span></h1>
                <p class="subdesc">Kh√°m ph√° h·ªá th·ªëng h·ªçc t·∫≠p th√¥ng minh s·ª≠ d·ª•ng AI ƒë·ªÉ t·∫°o l·ªô tr√¨nh h·ªçc t·∫≠p c√° nh√¢n h√≥a. Bi·∫øn ƒëam m√™ th√†nh k·ªπ nƒÉng, bi·∫øn s·ªü th√≠ch th√†nh th√†nh c√¥ng.</p>

                <div class="cta-row">
                    <div class="cta-center" style="width:100%;">
                        <button class="cta-main" id="startNowBtn"><i class="fa-solid fa-rocket"></i> B·∫Øt ƒê·∫ßu Ngay</button>
                    </div>
                </div>

                <div class="features" role="list">
                    <div class="feature ai" role="listitem">
                        <i class="fa-solid fa-brain"></i>
                        <div class="f-text">
                            <div class="f-title">AI Th√¥ng Minh</div>
                            <div class="f-sub">Ph√¢n t√≠ch s·ªü th√≠ch</div>
                        </div>
                    </div>

                    <div class="feature progress" role="listitem">
                        <i class="fa-solid fa-chart-line"></i>
                        <div class="f-text">
                            <div class="f-title">Theo D√µi Ti·∫øn ƒê·ªô</div>
                            <div class="f-sub">Gamification</div>
                        </div>
                    </div>
                </div>
            </div>

            <aside class="progress-card" aria-hidden="false">
                <div class="card-header">
                    <div>
                        <div class="card-title">L·ªô Tr√¨nh H·ªçc: L·∫≠p Tr√¨nh C++</div>
                        <div class="card-sub">5% ho√†n th√†nh ‚Ä¢ 30 ng√†y</div>
                    </div>
                    <div style="text-align:right;">
                        <div style="font-weight:800; font-size:16px; color:#0f172a;">5%</div>
                        <div style="font-size:12px; color:var(--muted);">Ti·∫øn ƒë·ªô t·ªïng th·ªÉ</div>
                    </div>
                </div>

                <div class="progress-bar-wrap" aria-hidden="true">
                    <div class="progress-fill" style="width:5%;"></div>
                </div>

                <div class="course-list">
                    <div class="course done">
                        <div class="label">
                            <i class="fa-solid fa-check-circle" style="color:#16a34a;"></i>
                            <div>B√†i 1: Gi·ªõi thi·ªáu C++</div>
                        </div>
                        <div class="meta">30 ph√∫t ‚Ä¢ 100% ho√†n th√†nh</div>
                    </div>

                    <div class="course">
                        <div class="label">
                            <i class="fa-solid fa-play-circle" style="color:#2563eb;"></i>
                            <div>B√†i 2: L·∫•y, xu·∫•t d·ªØ li·ªáu</div>
                        </div>
                        <div class="meta">30 ph√∫t ‚Ä¢ 50% ho√†n th√†nh</div>
                    </div>

                    <div class="course">
                        <div class="label">
                            <i class="fa-regular fa-clock" style="color:#9ca3af;"></i>
                            <div>B√†i 3: S·ªë nguy√™n v√† to√°n c∆° b·∫£n</div>
                        </div>
                        <div class="meta">30 ph√∫t ‚Ä¢ S·∫Øp t·ªõi</div>
                    </div>
                </div>

                <div class="card-footer">
                    <div class="badges">
                        <div class="badge" style="background:#fff5f0;"><i class="fa-solid fa-medal" style="color:#fb923c;"></i></div>
                        <div class="badge" style="background:#f8fafc;"><i class="fa-solid fa-star" style="color:#a78bfa;"></i></div>
                        <div class="badge" style="background:#f0fdf4;"><i class="fa-solid fa-trophy" style="color:#34d399;"></i></div>
                    </div>
                    <div style="text-align:right;">
                        <div class="points">1/30</div>
                        <div class="card-sub" style="text-align:right;">S·ªë b√†i ƒë√£ l√†m</div>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <!-- Ph·∫ßn Lƒ©nh V·ª±c Ph·ªï Bi·∫øn -->
    <section class="categories-section">
        <div class="section-header">
            <h2 class="section-title">Lƒ©nh V·ª±c Ph·ªï Bi·∫øn</h2>
            <p class="section-subtitle">Kh√°m ph√° c√°c l·ªô tr√¨nh h·ªçc t·∫≠p ƒë∆∞·ª£c y√™u th√≠ch nh·∫•t</p>
        </div>
        <div class="categories-grid" id="categoriesGrid">
            <!-- Categories will be loaded here -->
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-brand">
                <div class="footer-logo">
                    <div class="footer-logo-icon">
                        <i class="fa-solid fa-graduation-cap"></i>
                    </div>
                    <div class="footer-logo-text">
                        <div class="footer-logo-title">Con ƒë∆∞·ªùng ƒëam m√™</div>
                        <div class="footer-logo-sub">AI-Powered Learning Path</div>
                    </div>
                </div>
                <p class="footer-desc">N·ªÅn t·∫£ng h·ªçc t·∫≠p c√° nh√¢n h√≥a s·ª≠ d·ª•ng tr√≠ tu·ªá nh√¢n t·∫°o ƒë·ªÉ t·∫°o l·ªô tr√¨nh h·ªçc ph√π h·ª£p v·ªõi s·ªü th√≠ch v√† m·ª•c ti√™u c·ªßa t·ª´ng ng∆∞·ªùi.</p>
                <!--<div class="footer-social">
                    <a href="#" class="social-icon"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#" class="social-icon"><i class="fa-brands fa-twitter"></i></a>
                    <a href="#" class="social-icon"><i class="fa-brands fa-linkedin-in"></i></a>
                </div>-->
            </div>

            <div class="footer-section">
                <h3>T√≠nh NƒÉng</h3>
                <div class="footer-links">
                    <a href="create_roadmap_page.html" class="footer-link" id="create-btn">T·∫°o l·ªô tr√¨nh v·ªõi AI</a>
                    <a href="path.html" class="footer-link" id="path-btn">L∆∞u tr·ªØ c√°c l·ªô tr√¨nh</a>
                    <a href="progress.html" class="footer-link" id="progress-btn">Theo d√µi ti·∫øn ƒë·ªô</a>
                </div>
            </div>

            <div class="footer-section">
                <h3>H·ªó Tr·ª£</h3>
                <div class="footer-links">
                    <a href="https://mail.google.com/mail/?view=cm&fs=1&to=passionpathaisystem@gmail.com" target="_blank" rel="noopener noreferrer" class="footer-link">Li√™n h·ªá</a>
                    <a href="https://zalo.me/g/drfrli672" target="_blank" rel="noopener noreferrer" class="footer-link">Trung t√¢m tr·ª£ gi√∫p</a>
                    <a href="javascript:void(0)" onclick="openFeedbackModal()" style="color: #9ca3af; text-decoration: none; font-size: 13px; transition: color 0.3s ease;">Thu th·∫≠p √Ω ki·∫øn</a>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            ¬© 2025 Con ƒë∆∞·ªùng ƒëam m√™. All rights reserved. Made with <i class="fa-solid fa-heart" style="color:#e74c3c;"></i> for learners worldwide.
        </div>

    </footer>
        <!-- Modal Thu th·∫≠p √Ω ki·∫øn -->
<div class="modal-overlay" id="feedbackModal">
    <div class="modal-content" style="max-width: 900px;">
        <div class="modal-header">
            <div>
                <h2>üìã Thu Th·∫≠p √ù Ki·∫øn</h2>
                <p>ƒê√°nh gi√° tr·∫£i nghi·ªám c·ªßa b·∫°n v·ªõi h·ªá th·ªëng</p>
            </div>
            <button class="close-modal" onclick="closeFeedbackModal()">‚úï</button>
        </div>
        <div class="modal-body">
            <div class="info-box" style="margin-bottom: 20px;">
                <strong>üìå M·ª•c ƒë√≠ch thu th·∫≠p:</strong>
                <p style="margin: 10px 0 0 0; line-height: 1.6;">
                    K·∫øt qu·∫£ kh·∫£o s√°t s·∫Ω ƒë∆∞·ª£c t·ªïng h·ª£p nh·∫±m ho√†n thi·ªán m√¥ h√¨nh thi·∫øt k·∫ø l·ªô tr√¨nh h·ªçc c√° nh√¢n h√≥a, 
                    ƒë·∫£m b·∫£o t√≠nh hi·ªáu qu·∫£ v√† tr·∫£i nghi·ªám t·ªët h∆°n cho ng∆∞·ªùi d√πng.
                </p>
            </div>

            <form id="feedbackForm">
                <div style="background: #f0f9ff; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                    <h3 style="color: #0369a1; margin-bottom: 15px;">‚≠ê ƒê√°nh Gi√° (1-5)</h3>
                    <p class="small" style="margin-bottom: 20px;">
                        Sau khi tr·∫£i nghi·ªám l·ªô tr√¨nh h·ªçc c√° nh√¢n h√≥a, vui l√≤ng cho √Ω ki·∫øn ƒë√°nh gi√° theo c√°c ti√™u ch√≠ sau 
                        (ch·ªçn 1‚Üí5, trong ƒë√≥ 1 = ch∆∞a t·ªët, 5 = r·∫•t t·ªët)
                    </p>

                    <!-- Rating 1 -->
                    <div class="rating-group">
                        <label>1. M·ª©c ƒë·ªô ph√π h·ª£p c·ªßa n·ªôi dung h·ªçc *</label>
                        <div class="rating-stars" id="rating_1">
                            <span class="star" onclick="setFeedbackRating('rating_1', 1)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_1', 2)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_1', 3)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_1', 4)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_1', 5)">‚òÖ</span>
                        </div>
                        <div class="rating-value">Ch·ªçn: <span id="rating_1-value">0</span>/5</div>
                    </div>

                    <!-- Rating 2 -->
                    <div class="rating-group">
                        <label>2. M·ª©c ƒë·ªô h·ªØu √≠ch c·ªßa h·ªçc li·ªáu (link, b√†i t·∫≠p, h∆∞·ªõng d·∫´n) *</label>
                        <div class="rating-stars" id="rating_2">
                            <span class="star" onclick="setFeedbackRating('rating_2', 1)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_2', 2)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_2', 3)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_2', 4)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_2', 5)">‚òÖ</span>
                        </div>
                        <div class="rating-value">Ch·ªçn: <span id="rating_2-value">0</span>/5</div>
                    </div>

                    <!-- Rating 3 -->
                    <div class="rating-group">
                        <label>3. T√≠nh d·ªÖ hi·ªÉu, d·ªÖ √°p d·ª•ng *</label>
                        <div class="rating-stars" id="rating_3">
                            <span class="star" onclick="setFeedbackRating('rating_3', 1)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_3', 2)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_3', 3)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_3', 4)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_3', 5)">‚òÖ</span>
                        </div>
                        <div class="rating-value">Ch·ªçn: <span id="rating_3-value">0</span>/5</div>
                    </div>

                    <!-- Rating 4 -->
                    <div class="rating-group">
                        <label>4. T√≠nh th·ª±c t·∫ø v√† kh·∫£ nƒÉng ·ª©ng d·ª•ng v√†o c√¥ng vi·ªác / h·ªçc t·∫≠p *</label>
                        <div class="rating-stars" id="rating_4">
                            <span class="star" onclick="setFeedbackRating('rating_4', 1)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_4', 2)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_4', 3)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_4', 4)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_4', 5)">‚òÖ</span>
                        </div>
                        <div class="rating-value">Ch·ªçn: <span id="rating_4-value">0</span>/5</div>
                    </div>

                    <!-- Rating 5 -->
                    <div class="rating-group">
                        <label>5. T√≠nh c√° nh√¢n h√≥a (ph√π h·ª£p phong c√°ch h·ªçc, m·ª•c ti√™u c√° nh√¢n) *</label>
                        <div class="rating-stars" id="rating_5">
                            <span class="star" onclick="setFeedbackRating('rating_5', 1)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_5', 2)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_5', 3)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_5', 4)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_5', 5)">‚òÖ</span>
                        </div>
                        <div class="rating-value">Ch·ªçn: <span id="rating_5-value">0</span>/5</div>
                    </div>

                    <!-- Rating 6 -->
                    <div class="rating-group">
                        <label>6. M·ª©c ƒë·ªô duy tr√¨ ƒë·ªông l·ª±c h·ªçc *</label>
                        <div class="rating-stars" id="rating_6">
                            <span class="star" onclick="setFeedbackRating('rating_6', 1)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_6', 2)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_6', 3)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_6', 4)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_6', 5)">‚òÖ</span>
                        </div>
                        <div class="rating-value">Ch·ªçn: <span id="rating_6-value">0</span>/5</div>
                    </div>

                    <!-- Rating 7 -->
                    <div class="rating-group">
                        <label>7. Tr·∫£i nghi·ªám t·ªïng th·ªÉ v·ªõi h·ªá th·ªëng *</label>
                        <div class="rating-stars" id="rating_7">
                            <span class="star" onclick="setFeedbackRating('rating_7', 1)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_7', 2)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_7', 3)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_7', 4)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_7', 5)">‚òÖ</span>
                        </div>
                        <div class="rating-value">Ch·ªçn: <span id="rating_7-value">0</span>/5</div>
                    </div>

                    <!-- Rating 8 -->
                    <div class="rating-group">
                        <label>8. S·ª± ti·ªán l·ª£i c·ªßa ng∆∞·ªùi d√πng sau khi h·ªçc xong l·ªô tr√¨nh *</label>
                        <div class="rating-stars" id="rating_8">
                            <span class="star" onclick="setFeedbackRating('rating_8', 1)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_8', 2)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_8', 3)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_8', 4)">‚òÖ</span>
                            <span class="star" onclick="setFeedbackRating('rating_8', 5)">‚òÖ</span>
                        </div>
                        <div class="rating-value">Ch·ªçn: <span id="rating_8-value">0</span>/5</div>
                    </div>
                </div>

                <!-- C√¢u h·ªèi m·ªü -->
                <div style="background: #fef3c7; padding: 20px; border-radius: 12px; margin-top: 20px;">
                    <h3 style="color: #92400e; margin-bottom: 15px;">üí¨ C√¢u H·ªèi M·ªü</h3>

                    <div class="textarea-group">
                        <label>1. B·∫°n th√≠ch nh·∫•t ƒëi·ªÉm n√†o trong l·ªô tr√¨nh h·ªçc n√†y?</label>
                        <textarea id="question_1" rows="3" placeholder="Chia s·∫ª √Ω ki·∫øn c·ªßa b·∫°n..."></textarea>
                    </div>

                    <div class="textarea-group">
                        <label>2. B·∫°n g·∫∑p kh√≥ khƒÉn g√¨ trong qu√° tr√¨nh h·ªçc?</label>
                        <textarea id="question_2" rows="3" placeholder="Chia s·∫ª √Ω ki·∫øn c·ªßa b·∫°n..."></textarea>
                    </div>

                    <div class="textarea-group">
                        <label>3. B·∫°n c√≥ ƒë·ªÅ xu·∫•t c·∫£i thi·ªán n√†o ƒë·ªÉ h·ªá th·ªëng c√° nh√¢n h√≥a t·ªët h∆°n?</label>
                        <textarea id="question_3" rows="3" placeholder="Chia s·∫ª √Ω ki·∫øn c·ªßa b·∫°n..."></textarea>
                    </div>
                </div>

                <button type="submit" class="submit-evaluation-btn" style="margin-top: 20px;">
                    üíæ G·ª≠i Ph·∫£n H·ªìi
                </button>
            </form>
        </div>
    </div>
</div>
<script>
    const loginBtn = document.querySelector(".login-btn");
    const registerBtn = document.querySelector(".register-btn");
    const createBtn = document.querySelector("create-btn");
    const pathBtn = document.querySelector("path-btn");
    const progressBtn = document.querySelector("progress-btn");
    const userArea = document.getElementById("userArea");
    const ADMIN_TOKEN = 'admin-token';
    // Color schemes for categories
    const categoryColors = [
        { bg: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', icon: 'fa-code' },
        { bg: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)', icon: 'fa-globe' },
        { bg: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)', icon: 'fa-palette' },
        { bg: 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)', icon: 'fa-calculator' },
        { bg: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)', icon: 'fa-chart-line' },
        { bg: 'linear-gradient(135deg, #30cfd0 0%, #330867 100%)', icon: 'fa-music' }
    ];
(function createNavButtons() {
    const navButtons = document.getElementById('mainNavButtons');
    if (navButtons) {
        navButtons.innerHTML = `
            <button class="nav-btn active" id="btnHome"><i class="fa-solid fa-house"></i> Trang Ch·ªß</button>
            <button class="nav-btn" id="btnPath"><i class="fa-solid fa-route"></i> L·ªô Tr√¨nh H·ªçc</button>
            <button class="nav-btn" id="btnProgress"><i class="fa-solid fa-chart-line"></i> Ti·∫øn ƒê·ªô</button>
        `;
        
        // G·∫Øn s·ª± ki·ªán click ngay
        document.getElementById('btnHome').addEventListener('click', () => { 
            window.location.href = 'main.html'; 
        });
        
        document.getElementById('btnPath').addEventListener('click', () => {
            const token = localStorage.getItem('token');
             if (!token) {
                alert('Vui l√≤ng ƒëƒÉng nh·∫≠p!');
                window.location.href = 'login.html';
             }else {
            window.location.href = 'path.html';
             }
        });
        
        document.getElementById('btnProgress').addEventListener('click', () => { 
                        const token = localStorage.getItem('token');
             if (!token) {
                alert('Vui l√≤ng ƒëƒÉng nh·∫≠p!');
                window.location.href = 'login.html';
             }else {
            window.location.href = 'progress.html';
             }
        });
    }
})();

// ƒê·ª£i DOM load xong
document.addEventListener('DOMContentLoaded', function() {
    const createBtn = document.getElementById('create-btn'); // S·ª≠a l·∫°i ID ƒë√∫ng
    if (createBtn) {
        createBtn.addEventListener('click', (e) => {
            e.preventDefault(); // NgƒÉn link m·∫∑c ƒë·ªãnh
            const token = localStorage.getItem('token');
            if (!token) {
                alert('Vui l√≤ng ƒëƒÉng nh·∫≠p!');
                window.location.href = 'login.html';
            } else {
                window.location.href = 'create_roadmap_page.html';
            }
        });
    }
});
document.addEventListener('DOMContentLoaded', function() {
    const createBtn = document.getElementById('path-btn'); // S·ª≠a l·∫°i ID ƒë√∫ng
    if (createBtn) {
        createBtn.addEventListener('click', (e) => {
            e.preventDefault(); // NgƒÉn link m·∫∑c ƒë·ªãnh
            const token = localStorage.getItem('token');
            if (!token) {
                alert('Vui l√≤ng ƒëƒÉng nh·∫≠p!');
                window.location.href = 'login.html';
            } else {
                window.location.href = 'path.html';
            }
        });
    }
});
document.addEventListener('DOMContentLoaded', function() {
    const createBtn = document.getElementById('progress-btn'); // S·ª≠a l·∫°i ID ƒë√∫ng
    if (createBtn) {
        createBtn.addEventListener('click', (e) => {
            e.preventDefault(); // NgƒÉn link m·∫∑c ƒë·ªãnh
            const token = localStorage.getItem('token');
            if (!token) {
                alert('Vui l√≤ng ƒëƒÉng nh·∫≠p!');
                window.location.href = 'login.html';
            } else {
                window.location.href = 'progress.html';
            }
        });
    }
});
    function showAuthButtons() {
        loginBtn.style.display = "inline-flex";
        registerBtn.style.display = "inline-flex";
        const children = Array.from(userArea.children);
        children.forEach(c => {
            if (!c.classList.contains('login-btn') && !c.classList.contains('register-btn')) {
                try {
                    userArea.removeChild(c);
                } catch (e) {}
            }
        });
    }

    loginBtn.addEventListener("click", () => {
        window.location.href = "login.html";
    });

    registerBtn.addEventListener("click", () => {
        window.location.href = "register.html";
    });

    function wireLogoutAndNav(logoutEl) {
        if (logoutEl) {
            logoutEl.addEventListener('click', () => {
                localStorage.removeItem('token');
                localStorage.removeItem('role');

                if (!document.querySelector('.login-btn')) {
                    const b = document.createElement('button');
                    b.className = 'login-btn';
                    b.innerHTML = '<i class="fa-solid fa-right-to-bracket"></i> ƒêƒÉng nh·∫≠p';
                    b.addEventListener('click', () => window.location.href = 'login.html');
                    userArea.appendChild(b);
                }

                if (!document.querySelector('.register-btn')) {
                    const b2 = document.createElement('button');
                    b2.className = 'register-btn';
                    b2.innerHTML = '<i class="fa-solid fa-user-plus"></i> ƒêƒÉng k√Ω';
                    b2.addEventListener('click', () => window.location.href = 'register.html');
                    userArea.appendChild(b2);
                }

                showAuthButtons();
            });
        }
    }

    async function loadUser() {
        const token = localStorage.getItem('token');
        const navButtons = document.getElementById('mainNavButtons');
        

        
        showAuthButtons();
        if (!token) return;

        let name = 'Ng∆∞·ªùi d√πng';
        let serverRole = 'user';

        if (token === ADMIN_TOKEN) {
            name = 'Admin';
            serverRole = 'admin';
            localStorage.setItem('role', 'admin');
        } else {
            try {
                const res = await fetch('/api/me', { headers: { 'Authorization': 'Bearer ' + token }});
                if (!res.ok) { 
                    showAuthButtons(); 
                    return; 
                }
                const data = await res.json();
                serverRole = (data && (data.role || (data.user && data.user.role))) ? (data.role || data.user.role) : 'user';
                name = (data && data.user && data.user.name) ? data.user.name : 'Ng∆∞·ªùi d√πng';
                localStorage.setItem('role', serverRole);
            } catch (err) {
                console.error(err);
                showAuthButtons();
                return;
            }
        }

        if (document.querySelector('.login-btn')) {
            document.querySelector('.login-btn').style.display = 'none';
        }
        if (document.querySelector('.register-btn')) {
            document.querySelector('.register-btn').style.display = 'none';
        }

        userArea.innerHTML = `
            <span>Xin ch√†o <strong style="color:white;">${name}</strong></span>
            <button id="logout" class="logout-btn"><i class="fa-solid fa-right-from-bracket"></i> ƒêƒÉng xu·∫•t</button>
        `;
        const logoutEl = document.getElementById('logout');
        wireLogoutAndNav(logoutEl);

        // Th√™m n√∫t Admin n·∫øu l√† admin
        if (serverRole === 'admin') {
            const adminBtn = document.createElement('button');
            adminBtn.className = 'nav-btn';
            adminBtn.id = 'btnAdmin';
            adminBtn.innerHTML = '<i class="fa-solid fa-user-shield"></i> Qu·∫£n Tr·ªã';
            adminBtn.addEventListener('click', () => { 
                window.location.href = 'admin.html?page=admin'; 
            });
            navButtons.appendChild(adminBtn);
        }

        // Active state
        const params = new URLSearchParams(window.location.search);
        const page = params.get('page') || 'home';
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        const idMap = { home: 'btnHome', path: 'btnPath', progress: 'btnProgress', admin: 'btnAdmin' };
        const btnId = idMap[page];
        if (btnId) {
            const el = document.getElementById(btnId);
            if (el) el.classList.add('active');
        }
    }

    // Load top categories
    async function loadTopCategories() {
        try {
            const res = await fetch('/api/categories/top', {
                method: 'GET',
                headers: {
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                }
            });

            if (!res.ok) throw new Error('Failed to load categories');
            
            const categories = await res.json();
            const grid = document.getElementById('categoriesGrid');
            
            categories.forEach((cat, index) => {
                const colorScheme = categoryColors[index % categoryColors.length];
                const card = document.createElement('div');
                card.className = 'category-card';
                card.onclick = () => {
                    window.location.href = `main_category.html?category=${encodeURIComponent(cat.id)}`;
                };
                
                card.innerHTML = `
                    <div class="category-icon" style="background: ${colorScheme.bg};">
                        <i class="fa-solid ${colorScheme.icon}"></i>
                    </div>
                    <h3 class="category-name">${cat.name}</h3>
                    <p class="category-desc">${cat.description}</p>
                    <div class="category-stats">
                        <span class="category-count">${cat.roadmap_count}+ l·ªô tr√¨nh</span>
                        <button class="category-btn">Xem chi ti·∫øt</button>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        } catch (err) {
            console.error('Error loading categories:', err);
        }
    }

    loadUser();
    loadTopCategories();

    document.getElementById('startNowBtn').addEventListener('click', () => { 
            const token = localStorage.getItem('token');
             if (!token) {
                alert('Vui l√≤ng ƒëƒÉng nh·∫≠p!');
                window.location.href = 'login.html';
             }else {
            window.location.href = 'path.html';
             }
    });
    // Feedback modal logic
let feedbackRatings = {};

function openFeedbackModal() {
    // Check if user is logged in
    const token = localStorage.getItem('token');
    if (!token) {
        alert('Vui l√≤ng ƒëƒÉng nh·∫≠p!');
        window.location.href = 'login.html';
        return;
    }

    document.getElementById('feedbackModal').classList.add('active');
    feedbackRatings = {}; // Reset ratings
    
    // Reset all stars
    for (let i = 1; i <= 8; i++) {
        const stars = document.querySelectorAll(`#rating_${i} .star`);
        stars.forEach(star => star.classList.remove('active'));
        document.getElementById(`rating_${i}-value`).textContent = '0';
    }
    
    // Reset textareas
    document.getElementById('question_1').value = '';
    document.getElementById('question_2').value = '';
    document.getElementById('question_3').value = '';
}

function closeFeedbackModal() {
    document.getElementById('feedbackModal').classList.remove('active');
}

function setFeedbackRating(ratingId, value) {
    feedbackRatings[ratingId] = value;
    
    const stars = document.querySelectorAll(`#${ratingId} .star`);
    stars.forEach((star, index) => {
        if (index < value) {
            star.classList.add('active');
        } else {
            star.classList.remove('active');
        }
    });
    
    document.getElementById(`${ratingId}-value`).textContent = value;
}

function showNotification(message, type) {
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.textContent = message;
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 25px;
        border-radius: 8px;
        color: white;
        font-weight: 600;
        z-index: 10000;
        transform: translateX(400px);
        transition: transform 0.3s ease;
    `;
    
    if (type === 'success') {
        notification.style.background = '#059669';
    } else {
        notification.style.background = '#dc2626';
    }
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.transform = 'translateX(0)';
    }, 100);
    
    setTimeout(() => {
        notification.style.transform = 'translateX(400px)';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

// Handle feedback form submission
document.getElementById('feedbackForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    // Validate all 8 ratings are filled
    for (let i = 1; i <= 8; i++) {
        if (!feedbackRatings[`rating_${i}`]) {
            showNotification(`‚ö† Vui l√≤ng ƒë√°nh gi√° t·∫•t c·∫£ 8 ti√™u ch√≠!`, 'error');
            return;
        }
    }
    
    const submitBtn = this.querySelector('button[type="submit"]');
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<div class="spinner"></div> ƒêang g·ª≠i...';
    
    try {
        const payload = {
            rating_1: feedbackRatings.rating_1,
            rating_2: feedbackRatings.rating_2,
            rating_3: feedbackRatings.rating_3,
            rating_4: feedbackRatings.rating_4,
            rating_5: feedbackRatings.rating_5,
            rating_6: feedbackRatings.rating_6,
            rating_7: feedbackRatings.rating_7,
            rating_8: feedbackRatings.rating_8,
            question_1: document.getElementById('question_1').value.trim(),
            question_2: document.getElementById('question_2').value.trim(),
            question_3: document.getElementById('question_3').value.trim()
        };
        
        const response = await fetch('/api/feedback/submit', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${localStorage.getItem('token')}`
            },
            body: JSON.stringify(payload)
        });
        
        const result = await response.json();
        
        if (result.success) {
            showNotification('‚úÖ C·∫£m ∆°n b·∫°n ƒë√£ g·ª≠i ph·∫£n h·ªìi!', 'success');
            setTimeout(() => {
                closeFeedbackModal();
            }, 1500);
        } else {
            throw new Error(result.error || 'Kh√¥ng th·ªÉ g·ª≠i ph·∫£n h·ªìi');
        }
        
    } catch (error) {
        console.error('Error submitting feedback:', error);
        showNotification('‚úó ' + error.message, 'error');
    } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = 'üíæ G·ª≠i Ph·∫£n H·ªìi';
    }
});

// Close modal when clicking outside
document.getElementById('feedbackModal').addEventListener('click', function(e) {
    if (e.target === this) closeFeedbackModal();
});
</script>

</body>
</html>



